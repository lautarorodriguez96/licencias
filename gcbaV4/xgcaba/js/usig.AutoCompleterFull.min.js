jQuery.extendIf=function(d,e){if(d&&e){for(var b in e){if(typeof d[b]=="undefined"){d[b]=e[b]}}}return d};if(typeof(Ext)=="undefined"){jQuery.extend(Function.prototype,{createCallback:function(){var b=arguments;var c=this;return function(){return c.apply(window,b)}},createDelegate:function(d,c,b){var e=this;return function(){var g=c||arguments;if(b===true){g=Array.prototype.slice.call(arguments,0);g=g.concat(c)}else{if(typeof b=="number"){g=Array.prototype.slice.call(arguments,0);var f=[b,0].concat(c);Array.prototype.splice.apply(g,f)}}return e.apply(d||window,g)}},defer:function(d,f,c,b){var e=this.createDelegate(f,c,b);if(d){return setTimeout(e,d)}e();return 0},createSequence:function(c,b){if(typeof c!="function"){return this}var d=this;return function(){var e=d.apply(this||window,arguments);c.apply(b||this||window,arguments);return e}},createInterceptor:function(c,b){if(typeof c!="function"){return this}var d=this;return function(){c.target=this;c.method=d;if(c.apply(b||this||window,arguments)===false){return}return d.apply(this||window,arguments)}}});jQuery.extendIf(String,{escape:function(b){return b.replace(/('|\\)/g,"\\$1")},leftPad:function(e,c,d){var b=new String(e);if(!d){d=" "}while(b.length<c){b=d+b}return b.toString()},format:function(c){var b=Array.prototype.slice.call(arguments,1);return c.replace(/\{(\d+)\}/g,function(d,e){return b[e]})}})}String.prototype.isInteger=function(){return !isNaN(parseInt(this))};String.prototype.isFloat=function(){return !isNaN(parseFloat(this))};String.prototype.toggle=function(c,b){return this==c?b:c};String.prototype.trim=function(){var b=/^\s+|\s+$/g;return function(){return this.replace(b,"")}}();String.prototype.translate=function(e,d){if(!(e.length&&d.length)||e.length!=d.length){return this}var c=this;for(var b=0;b<e.length;b++){if(typeof(e)=="string"){c=c.replace(new RegExp(e.charAt(b),"g"),d.charAt(b))}else{c=c.replace(new RegExp(e[b],"g"),d[b])}}return c};String.prototype.isDigit=function(){return/^\d+$/.test(this)};String.prototype.removeWords=function(f){var e=this.split(" ");var d=new Array();for(var c=0;c<e.length;c++){d.push(e[c]);for(var b=0;b<f.length;b++){if(d[c]==f[b]){d.pop();break}}}return d.join(" ")};jQuery.extendIf(Number.prototype,{constrain:function(c,b){return Math.min(Math.max(this,c),b)},isInteger:function(){return !isNaN(parseInt(this))},isFloat:function(){return !isNaN(parseFloat(this))}});jQuery.extendIf(Array.prototype,{indexOf:function(d){for(var c=0,b=this.length;c<b;c++){if(this[c]==d){return c}}return -1},removeObject:function(c){var b=this.indexOf(c);if(b!=-1){this.splice(b,1)}return this},binarySearch:function binarySearch(g,c){var b=0,f=this.length-1,d,e;while(b<=f){d=parseInt((b+f)/2,10);e=c(this[d],g);if(e<0){b=d+1;continue}if(e>0){f=d-1;continue}return d}return -1},inject:function(d,c){for(var b=0;b<this.length;b++){d=c(d,this[b],b)}return d},map:function(e,d){var b=new Array(this.length);for(var c=0,f=this.length;c<f;c++){if(c in this){b[c]=e.call(d,this[c],c,this)}}return b},intersect:function(){if(!arguments.length){return[]}var e=this;var d=a2=null;var h=0;while(h<arguments.length){d=[];a2=arguments[h];var c=e.length;var b=a2.length;for(var g=0;g<c;g++){for(var f=0;f<b;f++){if(e[g]===a2[f]){d.push(e[g])}}}e=d;h++}return d.unique()},unique:function(){var c=[];var b=this.length;for(var e=0;e<b;e++){for(var d=e+1;d<b;d++){if(this[e]===this[d]){d=++e}}c.push(this[e])}return c}});Date.prototype.getElapsed=function(b){return Math.abs((b||new Date()).getTime()-this.getTime())};if(typeof(usig)=="undefined"){usig={}}usig.debug=function(b){if(window.console&&window.console.log){window.console.log(b)}};if(typeof(usig)=="undefined"){usig={}}jQuery.extendIf(usig,{loadingJs:[],loadingJsListeners:{},__callLoadJsListeners:function(c){for(var d=0,b=usig.loadingJsListeners[c].length;d<b;d++){usig.loadingJsListeners[c][d]()}},loadJs:function(c,f){if(usig.loadingJs.indexOf(c)<0){usig.loadingJs.push(c);usig.loadingJsListeners[c]=(typeof(f)=="function")?[f]:[];var b=document.createElement("script"),d=document.getElementsByTagName("head")[0],e=false;b.onload=b.onreadystatechange=function(){if((b.readyState&&b.readyState!=="complete"&&b.readyState!=="loaded")||e){return false}b.onload=b.onreadystatechange=null;e=true;usig.__callLoadJsListeners(c)};b.src=c;d.insertBefore(b,d.firstChild)}else{usig.loadingJsListeners[c].push(f)}},loadCss:function(b){var c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",b);if(typeof c!="undefined"){document.getElementsByTagName("head")[0].appendChild(c)}},removeJs:function(b){var d=document.getElementsByTagName("script");for(var c=d.length;c>=0;c--){if(d[c]&&d[c].getAttribute("src")!=null&&d[c].getAttribute("src").indexOf(b)!=-1){d[c].parentNode.removeChild(d[c])}}},removeCss:function(b){var d=document.getElementsByTagName("link");for(var c=d.length;c>=0;c--){if(d[c]&&d[c].getAttribute("href")!=null&&d[c].getAttribute("href").indexOf(b)!=-1){d[c].parentNode.removeChild(d[c])}}},Animator:function(d,e,f,g){var c=0;function b(){if(d.length>c){e(d[c]);c++;setTimeout(b,f)}else{if(typeof(g)=="function"){g()}}}this.stop=function(){c=d.length+1};b()},parseUri:function(f){var b=["source","protocol","authority","domain","port","path","directoryPath","fileName","query","anchor"],c=new RegExp("^(?:([^:/?#.]+):)?(?://)?(([^:/?#]*)(?::(\\d*))?)((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?").exec(f),e={};for(var d=0;d<10;d++){e[b[d]]=(c[d]?c[d]:"")}if(e.directoryPath.length>0){e.directoryPath=e.directoryPath.replace(/\/?$/,"/")}return e},registeredSuggesters:{},registerSuggester:function(b,c){usig.registeredSuggesters[b]=c},createSuggester:function(c,b){if(typeof(usig.registeredSuggesters[c])!="function"){throw"Suggester "+c+" is not registered.";return null}return new usig.registeredSuggesters[c](b)}});(function(e){var c=function(o){return o!==undefined&&o!==null},n=function(q,o,p){c(q)&&q.apply(o,p)},f=function(o){setTimeout(o,0)},g="",b="&",l="?",m="success",h="error",j=e("head"),i={},d={callback:"C",url:location.href},k=function(t){t=e.extend({},d,t);var s=t.beforeSend,B=0;t.abort=function(){B=1};if(c(s)&&(s(t,t)===false||B)){return t}var r=t.success,p=t.complete,w=t.error,D=t.dataFilter,H=t.callbackParameter,x=t.callback,E=t.cache,o=t.pageCache,u=t.url,J=t.data,y=t.timeout,A,I,G,F;u=c(u)?u:g;J=c(J)?((typeof J)=="string"?J:e.param(J)):g;c(H)&&(J+=(J==g?g:b)+escape(H)+"=?");!E&&!o&&(J+=(J==g?g:b)+"_"+(new Date()).getTime()+"=");A=u.split(l);if(J!=g){I=J.split(l);F=A.length-1;F&&(A[F]+=b+I.shift());A=A.concat(I)}G=A.length-2;G&&(A[G]+=x+A.pop());var q=A.join(l),C=function(K){c(D)&&(K=D.apply(t,[K]));n(r,t,[K,m]);n(p,t,[t,m])},z=function(K){n(w,t,[t,K]);n(p,t,[t,K])},v=i[q];if(o&&c(v)){f(function(){c(v.s)?C(v.s):z(h)});return t}f(function(){if(B){return}var K=e("<iframe />").appendTo(j),M=K[0],O=M.contentWindow||M.contentDocument,Q=O.document,L,R,S=function(T,U){L();z(c(U)?U:h)},N=function(U){O[U]=undefined;try{delete O[U]}catch(T){}},P=x=="E"?"X":"E";if(!c(Q)){Q=O;O=Q.getParentNode()}Q.open();O[x]=function(T){B=1;o&&(i[q]={s:T});f(function(){L();C(T)})};O[P]=function(T){(!T||T=="complete")&&!B++&&f(S)};t.abort=L=function(){clearTimeout(R);Q.open();N(P);N(x);Q.write(g);Q.close();K.remove()};Q.write(['<html><head><script src="',q,'" onload="',P,'()" onreadystatechange="',P,'(this.readyState)"><\/script></head><body onload="',P,'()"></body></html>'].join(g));Q.close();y>0&&(R=setTimeout(function(){!B&&S(g,"timeout")},y))});return t};k.setup=function(o){e.extend(d,o)};e.jsonp=k})($);(function(){var b=false,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;jQuery.Class=function(){};jQuery.Class.create=function(h){var g=this.prototype;b=true;var f=new this();b=false;for(var e in h){f[e]=typeof h[e]=="function"&&typeof g[e]=="function"&&c.test(h[e])?(function(i,j){return function(){var l=this._super;this._super=g[i];var k=j.apply(this,arguments);this._super=l;return k}})(e,h[e]):h[e]}function d(){if(!b&&d.prototype.init){return d.prototype.init.apply(this,arguments)}}d.prototype=f;d.prototype.constructor=d;d.extend=arguments.callee;return d}})();if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());if(typeof(usig)=="undefined"){usig={}}usig.InputController=function(d,c){var g=document.getElementById(d);var b="";var f=jQuery.extend({},usig.InputController.defaults,c);var h=function(j){var i=j.keyCode;if(window.event&&window.event.keyCode>0){i=window.event.keyCode}if(j.type!="blur"&&j.type!="focus"&&typeof(f.onKeyUp)=="function"){f.onKeyUp(i,g.value)}if(j.type!="blur"&&j.type!="focus"&&g.value!=b&&typeof(f.onChange)=="function"){b=g.value;f.onChange(g.value)}if(j.type=="blur"&&typeof(f.onBlur)=="function"){f.onBlur()}if(j.type=="focus"&&typeof(f.onFocus)=="function"){f.onFocus()}};var e=h.createDelegate(this);this.unbind=function(){jQuery(g).unbind(f.events,e)};this.bind=function(){jQuery(g).bind(f.events,e);b=jQuery(g).val()};this.setOptions=function(i){f=jQuery.extend({},f,i)};this.setValue=function(i){g.value=i;b=i};this.setFocus=function(){jQuery(g).focus()};if(!g){throw"InvalidField";return}else{this.bind()}};usig.InputController.defaults={events:"blur keyup input focus"};if(typeof(usig)=="undefined"){usig={}}usig.AutoCompleter=function(j,d,b){var c=document.getElementById(j),r=b,p=[],f={},s=jQuery.extend({},usig.AutoCompleter.defaults,d),u=null,o=true,k=[],m={},q=0,h=false;c.setAttribute("autocomplete","off");this.unbind=function(){u.unbind();e();r.hide()};this.bind=function(){u.bind()};this.destroy=function(){this.unbind();r.remove();delete u;while(p.length>0){p.pop()}for(var E=0;E<k.length;E++){delete k[E]}};this.setViewControl=function(i){r=i;r.onSelection(C.createDelegate(this))};this.setOptions=function(i){s=jQuery.extend({},s,i);r.setOptions(i)};this.addSuggester=function(H,F){var E=typeof(H)=="string"?H:H.name;if(typeof(f[E])=="undefined"){var i=H;if(typeof(H)=="string"){try{i=usig.createSuggester(E,{onReady:s.onReady,debug:s.debug,afterServerRequest:v.createDelegate(this,[E],1),afterServerResponse:z.createDelegate(this,[E],1),afterAbort:A.createDelegate(this,[E],1)})}catch(I){return false}}else{i.setOptions({debug:s.debug,afterServerRequest:v.createDelegate(this,[E],1),afterServerResponse:z.createDelegate(this,[E],1),afterAbort:A.createDelegate(this,[E],1)})}f[E]=i;m[E]=0;var G={inputPause:s.inputPause,maxSuggestions:s.maxSuggestions,serverTimeout:s.serverTimeout,minTextLength:s.minTextLength,maxRetries:s.maxRetries,showError:s.showError};G=jQuery.extend(G,F);p.push({suggester:i,options:G,inputTimer:null})}else{}};this.removeSuggester=function(E){if(typeof(f[E])!="undefined"){f[E]=undefined;for(var F=0;F<p.length;F++){if(p[F].suggester.name==E){p.removeObject(p[F]);break}}}else{}};this.setSuggesterOptions=function(F,E){if(typeof(f[F])!="undefined"){for(var G=0;G<p.length;G++){if(p[G].suggester.name==F){p[G].options=jQuery.extend(p[G].options,E);break}}}else{}};this.getSuggesters=function(){var F={};for(var E=0;E<p.length;E++){F[p[E].suggester.name]=jQuery.extend({},p[E].options)}return F};this.changeSkin=function(i){r.changeSkin(i)};this.getOptions=function(){return s};this.selectOption=function(i){return r.selectOption(i)};this.hide=function(){r.hide()};this.ready=function(){var i=false;for(y=0;y<p.length;y++){i=i||p[y].suggester.ready()}return i};function D(H,G){var F=H.suggester;var E=H.options;i=function i(J,I){if(c.value==I){if(J.getErrorMessage!=undefined){try{if(!h&&E.showError){r.showMessage(J.getErrorMessage())}}catch(K){if(!h&&E.showError){r.showMessage(s.texts.nothingFound)}}}else{if(J.length==0){if(!h&&E.showError){r.showMessage(s.texts.nothingFound)}}else{J=J.map(function(L){L.suggesterName=F.name;return L});r.show(J,h);h=true;if(!o){r.hide()}}}if(typeof(s.afterSuggest)=="function"){s.afterSuggest()}}else{}};F.getSuggestions(G,i.createDelegate(this,[G],1),E.maxSuggestions)}function e(){for(var E=0;E<p.length;E++){if(p[E].inputTimer){clearTimeout(p[E].inputTimer)}p[E].suggester.abort()}if(typeof(s.afterAbort)=="function"){s.afterAbort()}}function C(i){e();var E=i.toString();u.setValue(E);if(typeof(s.afterSelection)=="function"){s.afterSelection(i)}if(typeof(s.afterGeoCoding)=="function"){if(typeof(s.beforeGeoCoding)=="function"){s.beforeGeoCoding()}f[i.suggesterName].getGeoCoding(i,g)}u.setFocus()}function B(i,F,E){if(i.descripcion!=undefined&&i.descripcion!=""){return'<li><a href="#" class="acv_op" name="'+F+'"><span class="tl"/><span class="tr"/><span>'+E(i.toString())+'</span></a><span class="clase">('+i.descripcion+")</span></li>"}else{return'<li><a href="#" class="acv_op" name="'+F+'"><span class="tl"/><span class="tr"/><span>'+E(i.toString())+"</span></a></li>"}}function w(G){try{e();r.update(G)}catch(E){throw (E)}h=false;for(var F=0;F<p.length;F++){if(G.length>=p[F].options.minTextLength){p[F].inputTimer=D.defer(p[F].options.inputPause,this,[p[F],G])}}}function l(i){r.keyUp(i)}function t(){o=false;r.hide.defer(300)}function n(){o=true}function A(i){if(m[i]>0){m[i]--;q--}}function v(i){m[i]++;q++;if(typeof(s.afterServerRequest)=="function"){s.afterServerRequest()}}function z(i){if(m[i]>0){m[i]--;q--}if(typeof(s.afterServerResponse)=="function"&&q==0){s.afterServerResponse()}}function g(i){if(i instanceof usig.Suggester.GeoCodingTypeError){u.setValue(c.value+" ")}s.afterGeoCoding(i)}try{u=new usig.InputController(j,{onKeyUp:l.createDelegate(this),onChange:w.createDelegate(this),onBlur:t.createDelegate(this),onFocus:n.createDelegate(this),debug:s.debug})}catch(x){throw (x)}for(var y=0;y<s.suggesters.length;y++){this.addSuggester(s.suggesters[y].suggester,s.suggesters[y].options)}if(!r){r=new usig.AutoCompleterDialog(j,{maxOptions:s.maxOptions,rootUrl:s.rootUrl,debug:s.debug,skin:s.skin,autoSelect:s.autoSelect,autoHideTimeout:s.autoHideTimeout,optionsFormatter:B,onEnterWithoutSelection:s.onEnterWithoutSelection});k.push(r)}r.onSelection(C.createDelegate(this))};usig.AutoCompleter.defaults={inputPause:200,maxSuggestions:10,serverTimeout:5000,minTextLength:3,maxRetries:5,showError:true,maxOptions:10,offsetY:-5,zIndex:10000,autoHideTimeout:10000,autoSelect:true,rootUrl:"http://servicios.usig.buenosaires.gov.ar/usig-js/2.1/",skin:"usig4",suggesters:[{suggester:"Direcciones",options:{inputPause:10,minTextLength:3}},{suggester:"Lugares",options:{inputPause:500,minTextLength:3,showError:false}}],debug:false,texts:{nothingFound:"No se hallaron resultados coincidentes con su b&uacute;squeda."}};if(typeof(usig)=="undefined"){usig={}}usig.AutoCompleterDialog=function(h,d){var b=document.getElementById(h),i=b.value,o=jQuery.extend({},usig.AutoCompleterDialog.defaults,d),q="usig_acv_"+h,n=null,g=-1,c=false,l=0,v=null,f={},w={arrUp:38,arrDn:40,enter:13,esc:27};function k(){clearTimeout(n)}function p(){k();n=r.defer(o.autoHideTimeout,this)}function r(){v.fadeOut("slow")}function s(x){k();if(v){jQuery("#"+q+" div.content").html(x);v.show();g=-1}else{v=jQuery('<div id="'+q+'" class="usig_acv">						<div class="header">							<div class="corner"/>							<div class="bar"/>						</div>						<div class="content">'+x+'</div>						<div class="footer">							<div class="corner"/>							<div class="bar"/>						</div>					</div>');var y=jQuery(b).offset();v.css({position:"absolute",left:y.left+"px",top:(y.top+b.offsetHeight+parseInt(o.offsetY))+"px",width:b.offsetWidth,zIndex:o.zIndex});jQuery("body").append(v);v.mouseover(k.createDelegate(this));v.mouseout(p.createDelegate(this));g=-1}n=r.defer(o.autoHideTimeout,this)}function j(){if(v){g=-1;jQuery("ul.options li.highlight",v).removeClass("highlight")}}function e(x){if(v){g=x;jQuery("ul.options li.highlight",v).removeClass("highlight");if(typeof(x)=="string"){jQuery('ul.options li:has(a[name="'+x+'"])',v).addClass("highlight")}else{jQuery("ul.options li:has(a)",v).slice(x,x+1).addClass("highlight")}}}function m(x){var E=new x.constructor(x);E.marked=Array();var D=i.split(" ");for(var A=0;A<D.length;A++){var C=E.toLowerCase().indexOf(D[A].toLowerCase());if(C<0){var C=E.toLowerCase().indexOf(D[A].translate("áéíóúüÁÉÍÓÚÜàèìòùÀÈÌÒÙ","aeiouuAEIOUUaeiouAEIOU").toLowerCase())}if(C>=0){for(var B=0;B<D[A].length;B++){E.marked[C+B]=true}}}var z="";var y=false;for(var A=0;A<E.length;A++){if(E.marked[A]&&!y){z=z+"<em>"+E.substring(A,A+1);y=true}else{if((E.marked[A]&&y)||(!E.marked[A]&&!y)){z=z+E.substring(A,A+1)}else{z=z+"</em>"+E.substring(A,A+1);y=false}}}if(y){z=z+"</em>"}return z}function u(x){if(typeof(o.onSelection)=="function"){k();r();o.onSelection(x)}}function t(){k();g=-1;l=0;f={}}this.setOptions=function(x){o=jQuery.extend({},o,x)};this.update=function(x){if(x==""&&v){v.hide()}i=x;t()};this.getOptions=function(){return o};this.show=function(y,x){var A="";var B=isNaN(parseInt(x))?0:parseInt(x);if(x!=undefined){if(B>0){jQuery("ul.options li",v).slice(B).remove();l=jQuery("ul.options li a",v).length}}else{l=0;f={}}var z=m;jQuery.each(y,function(C,D){if(l>=o.maxOptions){return false}if(typeof(D)=="string"){A+='<li class="message">'+D+"</li>"}else{if(typeof(o.optionsFormatter)=="function"){A+=o.optionsFormatter(D,q+l,z);f[q+l]=D;l++}else{if(typeof(D.toString)=="function"){A+='<li><a href="#" class="acv_op" name="'+q+l+'"><span class="tl"/><span class="tr"/><span>'+z(D.toString())+"</span></a></li>";f[q+l]=D;l++}}}});if((x===true||!isNaN(parseInt(x)))&&v&&jQuery("ul.options li a",v).length>0){if(l>1&&c){c=false;j()}jQuery("ul.options",v).append(A)}else{s('<ul class="options">'+A+"</ul>")}jQuery("ul.options li a",v).mouseover((function(D,C){C(D.target.name)}).createDelegate(this,[e],1));jQuery("ul.options li a",v).click((function(D){var E=D.target?D.target:D.srcElement;var C=jQuery(E).parents("a.acv_op").attr("name");u(f[C]);D.preventDefault()}).createDelegate(this));if(o.autoSelect&&l==1){g=0;c=true;e(g)}};this.showMessage=function(x){s('<div class="message">'+x+"</div>")};this.keyUp=function(x){if(g==undefined){g=-1}if((x==w.arrDn||x==w.arrUp)&&l>0){if(v.css("display")!="block"){v.show()}else{p();g=x==w.arrDn?(g+1).constrain(0,l-1):(g-1).constrain(0,l-1);e(g)}}if(w.enter==x){if(v.css("display")!="block"){if(typeof(o.onEnterWithoutSelection)=="function"){o.onEnterWithoutSelection(i)}v.show()}else{if(g>=0||l==1){if(g>=0){u(f[q+g])}else{u(f[q+"0"])}}else{if(l>0&&typeof(o.onEnterWithoutSelection)=="function"){o.onEnterWithoutSelection(i)}}}}if(w.esc==x){k();r()}};this.remove=function(){k();if(v){v.remove()}};this.onSelection=function(x){if(typeof(x)=="function"){o.onSelection=x}};this.selectOption=function(x){if(l>x){if(v.css("display")!="block"){v.show()}e(x);u(f[q+g]);return true}return false};this.changeSkin=function(x){usig.removeCss(o.rootUrl+"css/usig.AutoCompleterDialog."+o.skin+".css");o.skin=x;usig.loadCss(o.rootUrl+"css/usig.AutoCompleterDialog."+o.skin+".css")};this.hide=function(){k();if(v){v.hide()}};usig.loadCss(o.rootUrl+"css/usig.AutoCompleterDialog."+o.skin+".css")};usig.AutoCompleterDialog.defaults={maxOptions:10,debug:false,offsetY:-5,zIndex:10000,autoHideTimeout:5000,autoSelect:true,rootUrl:"http://servicios.usig.buenosaires.gov.ar/usig-js/2.1/",skin:"usig4"};if(typeof(usig)=="undefined"){usig={}}usig.Suggester=jQuery.Class.create({init:function(c,b){this.name=c;this.cleanList=[];this.opts=jQuery.extend({},usig.Suggester.defaults,b)},getSuggestions:function(b,d,c){throw new usig.Suggester.MethodNotImplemented()},getGeoCoding:function(b,c){throw new usig.Suggester.MethodNotImplemented()},abort:function(){},setOptions:function(b){this.opts=jQuery.extend({},this.opts,b)},getOptions:function(){return this.opts},ready:function(){throw new usig.Suggester.MethodNotImplemented()},destroy:function(){for(var b=0;b<this.cleanList.length;b++){delete this.cleanList[b]}}});usig.Suggester.defaults={debug:false,serverTimeout:5000,maxRetries:5,maxSuggestions:10};usig.Suggester.MethodNotImplemented=function(){this.msg="Suggester: Method Not Implemented.";this.toString=function(){return this.msg}};usig.Suggester.GeoCodingTypeError=function(){this.msg="Suggester: Wrong object type for geocoding.";this.toString=function(){return this.msg}};if(typeof(usig)=="undefined"){usig={}}usig.AjaxComponent=jQuery.Class.create({init:function(e,b,d){this.name=e;var c=window.location.host==usig.parseUri(b).authority?"ajax":"jsonp";this.defaultParams={type:"GET",url:b,dataType:c};jQuery.jsonp.setup({callbackParameter:"callback",pageCache:true,dataFilter:function(f){return JSON.parse(JSON.stringify(f))}});this.opts=jQuery.extend({},usig.AjaxComponent.defaults,d)},mkRequest:function(f,i,g,d){var c=null;function b(k,l){clearTimeout(c);if(typeof(this.opts.afterServerResponse)=="function"){this.opts.afterServerResponse()}l(k)}function h(l,n,k){if(l!=null&&l.readyState!=0&&l.readyState!=4){l.abort();if(typeof(this.opts.afterAbort)=="function"){this.opts.afterAbort()}if(this.opts.maxRetries>k){var m=(n.dataType=="jsonp")?jQuery.jsonp(n):jQuery.ajax(n);if(typeof(this.opts.afterRetry)=="function"){this.opts.afterRetry()}c=setTimeout(h.createDelegate(this,[m,j,(k+1)]),this.opts.serverTimeout)}else{if(typeof(n.error)=="function"){n.error("Se produjo un error al intentar acceder al servidor: "+n.url)}}}}if(typeof(i)!="function"){return}if(typeof(g)!="undefined"&&typeof(g)!="function"){return}var j=jQuery.extend(true,{},this.defaultParams,{success:b.createDelegate(this,[i],1),error:g,data:f});if(d){j.url=d}var e=(j.dataType=="jsonp")?jQuery.jsonp(j):jQuery.ajax(j);if(typeof(this.opts.afterServerRequest)=="function"){this.opts.afterServerRequest()}if(this.opts.serverTimeout>0){c=setTimeout(h.createDelegate(this,[e,j,0]),this.opts.serverTimeout)}return e},setOptions:function(b){this.opts=jQuery.extend({},this.opts,b)},getOptions:function(){return this.opts}});usig.AjaxComponent.defaults={debug:false,serverTimeout:5000,maxRetries:5};if(typeof(usig)=="undefined"){usig={}}usig.Punto=function(c,b){this.x=this.lon=c;this.y=this.lat=b;this.getX=function(){return this.x};this.getY=function(){return this.y};this.toJson=function(){return'{ "x":'+this.x+', "y": '+this.y+" }"};this.toString=function(){return"("+this.x+", "+this.y+")"}};usig.Punto.fromWkt=function(c){var d=/^POINT *\(([0-9]+\.[0-9]+) ([0-9]+\.[0-9]+)\)$/;var b=null;if(resMatch=c.match(d)){b=new usig.Punto(resMatch[1],resMatch[2])}return b};usig.Punto.fromPunto=function(b){return new usig.Punto(b.getX(),b.getY())};if(typeof(usig)=="undefined"){usig={}}if(typeof(usig.Calle)=="undefined"){usig.Calle=function(b,c,e,d){this.codigo=b;this.nombre=c;this.alturaValida=function(g){if(e instanceof Array){if(e.length==0){throw (new usig.ErrorCalleSinAlturas(this.nombre));return false}var f=false;for(a in e){f=f||((parseInt(e[a][0])<=parseInt(g))&&(parseInt(e[a][1])>=parseInt(g)))}return f}};this.getTramos=function(){return e};this.toString=function(){return this.nombre};this.seCruzaCon=function(f){if(d){return d.indexOf(f.codigo)>=0}}}}if(typeof(usig)=="undefined"){usig={}}if(typeof(usig.Direccion)=="undefined"){usig.Direccion=function(b,f){var e=null;var i=null;var h=0;var d=null;var g="";var c=null;if(b instanceof usig.Calle){e=b}else{return null}if(f instanceof usig.Calle){i=f;d=usig.Direccion.CALLE_Y_CALLE}else{if(!isNaN(parseInt(f))){d=usig.Direccion.CALLE_ALTURA;h=parseInt(f)}else{return null}}this.getCalle=function(){return e};this.getCalleCruce=function(){if(d==usig.Direccion.CALLE_Y_CALLE){return i}else{return null}};this.getAltura=function(){return h};this.getTipo=function(){return d};this.toString=function(){if(d==usig.Direccion.CALLE_ALTURA){return e.toString()+" "+(h>0?h:"S/N")}else{var j=i.toString();var k=j.match(/^(I|Hi|HI).*/)?" e ":" y ";return e.toString()+k+j}};this.setCoordenadas=function(j){c=usig.Punto.fromPunto(j)};this.setSmp=function(j){g=j};this.getCoordenadas=function(){return c};this.getSmp=function(){return g};this.clone=function(){var j=new usig.Direccion(e,f);return jQuery.extend(true,j,this)}};usig.Direccion.CALLE_ALTURA=0;usig.Direccion.CALLE_Y_CALLE=1;usig.Direccion.fromObj=function(d){var c=new usig.Calle(d.cod_calle,d.calle);var b=null;if(d.cod_calle2!=null){b=new usig.Direccion(c,new usig.Calle(d.cod_calle2,d.calle2))}else{b=new usig.Direccion(c,d.altura)}if(d.smp!=undefined&&d.smp!=null){b.setSmp(d.smp)}if(d.coordenadas!=undefined&&d.coordenadas!=null){b.setCoordenadas(usig.Punto.fromWkt(d.coordenadas))}return b}}if(typeof(usig)=="undefined"){usig={}}usig.GeoCoder=usig.AjaxComponent.extend({metodos:["interpolacion","puertas","centroide"],init:function(b){var c=jQuery.extend({},usig.GeoCoder.defaults,b);this._super("GeoCoder",usig.GeoCoder.defaults.server,c)},validarMetodo:function(b){if(b!=undefined){if(this.metodos.indexOf(b)>=0){return b}}else{if(this.opts.metodo!=undefined){return this.opts.metodo}}return undefined},onSuccess:function(b,c){if(typeof(b)!="string"){c(new usig.Punto(b.x,b.y))}else{c(b)}},geoCodificarDireccion:function(c,e,b,d){if(!(c instanceof usig.Direccion)){throw ("dir debe ser una instancia de usig.Direccion");return}if(c.getTipo()==usig.Direccion.CALLE_ALTURA){this.geoCodificarCodigoDeCalleAltura(c.getCalle().codigo,c.getAltura(),e,b,d)}else{this.geoCodificar2CodigosDeCalle(c.getCalle().codigo,c.getCalleCruce().codigo,e,b)}},geoCodificarCalleAltura:function(e,g,f,b,c){if(!g.isInteger()){throw ("altura tiene que ser un entero");return}var d={cod_calle:e,altura:g};c=this.validarMetodo(c);if(c!=undefined){d.metodo=c}this.mkRequest(d,this.onSuccess.createDelegate(this,[f],1),b)},geoCodificarCodigoDeCalleAltura:function(d,g,f,b,c){if(!d.isInteger()){throw ("codCalle tiene que ser un entero");return}if(!g.isInteger()){throw ("altura tiene que ser un entero");return}var e={cod_calle:d,altura:g};c=this.validarMetodo(c);if(c!=undefined){e.metodo=c}this.mkRequest(e,this.onSuccess.createDelegate(this,[f],1),b)},geoCodificarCalleYCalle:function(c,b,f,d){var e={cod_calle1:c,cod_calle2:b};this.mkRequest(e,this.onSuccess.createDelegate(this,[f],1),d)},geoCodificar2CodigosDeCalle:function(f,d,e,b){if(!f.isInteger()){throw ("codCalle1 tiene que ser un entero");return}if(!d.isInteger()){throw ("codCalle2 tiene que ser un entero");return}var c={cod_calle1:f,cod_calle2:d};this.mkRequest(c,this.onSuccess.createDelegate(this,[e],1),b)}});usig.GeoCoder.defaults={debug:false,server:"http://ws.usig.buenosaires.gob.ar/geocoder/2.2/geocoding/",metodo:undefined};if(typeof(usig)=="undefined"){usig={}}usig.Inventario=usig.AjaxComponent.extend({lastRequest:null,init:function(b){var c=jQuery.extend({},usig.Inventario.defaults,b);this._super("Inventario",usig.Inventario.defaults.server,c)},getCategorias:function(c,b){this.lastRequest=this.mkRequest({},c,b,this.opts.server+"getCategorias/")},getParcelaPorDir:function(c,d,b){this.lastRequest=this.mkRequest({cod_calle:c.cod,altura:c.alt},d,b,this.opts.server+"getParcela/")},getDir:function(c,d,b){this.lastRequest=this.mkRequest(c,d,b,this.opts.server+"getDir/")},getParcela:function(d,c,e,b){this.lastRequest=this.mkRequest(d,e,b,this.opts.server+"getParcela"+c+"/")},getDatosTransporte:function(c,d,b){this.lastRequest=this.mkRequest(c,d,b,this.opts.server+"getDatosTransporte/")},buscar:function(i,h,c,b){function d(j,m){var l={},k=[];jQuery.each(j.clasesEncontradas,function(n,o){l[o.id]=new usig.inventario.Clase(o.id,o.nombre,o.nombreId,o.nombreNorm)});jQuery.each(j.instancias,function(n,o){k.push(new usig.inventario.Objeto(o,l[o.claseId]))});if(typeof(m)=="function"){m(k)}}var e=jQuery.extend({},usig.Inventario.defaults.searchOptions,b),f={start:e.start,limit:e.limit,texto:i,tipo:e.tipoBusqueda};if(e.categoria!=undefined){f.categoria=e.categoria}if(e.clase!=undefined){f.clase=e.clase}if(e.bbox){f.bbox=[e.extent.left,e.extent.bottom,e.extent.right,e.extent.top].join(",")}var g=d.createDelegate(this,[h],1);if(e.returnRawData){g=h}this.lastRequest=this.mkRequest(f,g,c,this.opts.server+"buscar/")},getObjeto:function(d,e,b){function c(g,i,h){if(h instanceof usig.inventario.Objeto){h.fill(g);i(h)}else{i(new usig.inventario.Objeto(g))}}var f=parseInt(d)?parseInt(d):parseInt(d.id);if(f>0){this.lastRequest=this.mkRequest({id:f},c.createDelegate(this,[e,d],1),b,this.opts.server+"getObjectContent/")}},getFeatureInfo:function(c,d,b){this.lastRequest=this.mkRequest(c,d,b,this.opts.server+"getObjectContent/")},getCloseFeatures:function(c,d,b){this.lastRequest=this.mkRequest(c,d,b,this.opts.server+"objetosCercanos/")},getGeom:function(b,d,c){this.lastRequest=this.mkRequest({id:b},d,c,this.opts.server+"getGeometria/")},abort:function(){if(this.lastRequest){this.lastRequest.abort();this.lastRequest=null;if(typeof(this.opts.afterAbort)=="function"){this.opts.afterAbort()}}else{}}});usig.Inventario.defaults={debug:false,server:"http://inventario.usig.buenosaires.gob.ar/publico/",searchOptions:{start:0,limit:20,tipoBusqueda:"ranking",categoria:undefined,clase:undefined,bbox:false,extent:undefined,returnRawData:false}};if(typeof(usig)=="undefined"){usig={}}if(typeof(usig.inventario)=="undefined"){usig.inventario={}}usig.inventario.Objeto=function(b,c){this.id=0;this.nombre=usig.inventario.Objeto.defaults.texts.noName;this.ubicacion=null;this.clase=c;this.direccionAsociada=null;this.fechaAlta=null;this.fechaUltimaModificacion=null;this.datos={};this.rawData={};this.descripcion=null;if(c!=undefined){this.descripcion=c.getNombre()}this.fill=function(d){if(d.id){this.id=d.id}if(d.nombre){this.nombre=d.nombre}if(d.ubicacion){this.ubicacion=new usig.inventario.Ubicacion(d.ubicacion)}if(d.fechaAlta){this.fechaAlta=new Date(d.fechaAlta)}if(d.fechaUltimaModificacion){this.fechaUltimaModificacion=new Date(d.fechaUltimaModificacion)}if(d.direccionAsociada){this.direccionAsociada=usig.Direccion.fromObj(d.direccionAsociada)}if(d.contenido){var e=this.datos;jQuery.each(d.contenido,function(g,f){e[f.nombreId]={alias:f.nombre,valor:f.valor,pos:f.posicion}})}};this.toString=function(){return this.nombre};this.getRawData=function(){return this.rawData};this.clone=function(){var d=new usig.inventario.Objeto(b,c);return jQuery.extend(true,d,this)};this.fill(b);this.rawData=jQuery.extend(this.rawData,b)};usig.inventario.Objeto.defaults={texts:{noName:"Sin Nombre"}};if(typeof(usig)=="undefined"){usig={}}if(typeof(usig.inventario)=="undefined"){usig.inventario={}}usig.inventario.Clase=function(e,d,c,b){this.getId=function(){return e};this.getNombre=function(){return d};this.getNombreId=function(){return c};this.getNombreNormalizado=function(){return b}};if(typeof(usig)=="undefined"){usig={}}if(typeof(usig.inventario)=="undefined"){usig.inventario={}}usig.inventario.Ubicacion=function(b){var c=null;if(b instanceof usig.Punto){c=b}else{if(b.centroide!=undefined){c=usig.Punto.fromWkt(b.centroide)}}this.getCentroide=function(){return c};this.getTipo=function(){return b.tipo}};if(typeof(usig)=="undefined"){usig={}}usig.SuggesterLugares=usig.Suggester.extend({init:function(b){if(b!=undefined){var c=jQuery.extend({},usig.SuggesterLugares.defaults.searchOptions,b.searchOptions);b.searchOpts=c}var d=jQuery.extend({},usig.SuggesterLugares.defaults,b);this._super("Lugares",d);if(!this.opts.inventario){this.opts.inventario=new usig.Inventario(d);this.cleanList.push(this.opts.inventario)}},getSuggestions:function(d,f,e){var b=e!=undefined?e:this.opts.maxSuggestions;try{this.opts.inventario.buscar(d,f,function(){},{limit:b})}catch(c){f(c)}},getGeoCoding:function(b,c){if(!(b instanceof usig.inventario.Objeto)){c(new usig.Suggester.GeoCodingTypeError())}else{this.opts.inventario.getObjeto(b,function(d){if(d.direccionAsociada){c(d.direccionAsociada.getCoordenadas())}else{if(d.ubicacion){c(d.ubicacion.getCentroide())}}},function(){})}},abort:function(){this.opts.inventario.abort()},ready:function(){return true},setOptions:function(b){this._super(b);this.opts.inventario.setOptions(b)}});usig.SuggesterLugares.defaults={serverTimeout:5000,maxRetries:5,maxSuggestions:10,searchOptions:{start:0,limit:20,tipoBusqueda:"ranking",categoria:undefined,clase:undefined,bbox:false,extent:undefined,returnRawData:false}};usig.registerSuggester("Lugares",usig.SuggesterLugares);if(typeof(usig)=="undefined"){usig={}}usig.SuggesterDirecciones=usig.Suggester.extend({init:function(b){this._super("Direcciones",b);if(!this.opts.normalizadorDirecciones){this.opts.normalizadorDirecciones=usig.NormalizadorDirecciones.init({aceptarCallesSinAlturas:this.opts.acceptSN,onReady:this.opts.onReady});this.cleanList.push(this.opts.normalizadorDirecciones)}if(!this.opts.geoCoder){this.opts.geoCoder=new usig.GeoCoder(this.opts);this.cleanList.push(this.opts.geoCoder)}},getSuggestions:function(d,f,e){var b=e!=undefined?e:this.opts.maxSuggestions;try{f(this.opts.normalizadorDirecciones.normalizar(d,b))}catch(c){f(c)}},getGeoCoding:function(b,c){if(!(b instanceof usig.Direccion)){c(new usig.Suggester.GeoCodingTypeError())}else{this.opts.geoCoder.geoCodificarDireccion(b,c)}},ready:function(){return this.opts.normalizadorDirecciones.listo()},setOptions:function(b){opts=jQuery.extend({},this.opts,b);this._super(opts);this.opts.geoCoder.setOptions(opts)}});usig.SuggesterDirecciones.defaults={debug:false,serverTimeout:5000,maxRetries:5,maxSuggestions:10,acceptSN:true};usig.registerSuggester("Direcciones",usig.SuggesterDirecciones);jQuery.extendIf=function(d,e){if(d&&e){for(var b in e){if(typeof d[b]=="undefined"){d[b]=e[b]}}}return d};if(typeof(Ext)=="undefined"){jQuery.extend(Function.prototype,{createCallback:function(){var b=arguments;var c=this;return function(){return c.apply(window,b)}},createDelegate:function(d,c,b){var e=this;return function(){var g=c||arguments;if(b===true){g=Array.prototype.slice.call(arguments,0);g=g.concat(c)}else{if(typeof b=="number"){g=Array.prototype.slice.call(arguments,0);var f=[b,0].concat(c);Array.prototype.splice.apply(g,f)}}return e.apply(d||window,g)}},defer:function(d,f,c,b){var e=this.createDelegate(f,c,b);if(d){return setTimeout(e,d)}e();return 0},createSequence:function(c,b){if(typeof c!="function"){return this}var d=this;return function(){var e=d.apply(this||window,arguments);c.apply(b||this||window,arguments);return e}},createInterceptor:function(c,b){if(typeof c!="function"){return this}var d=this;return function(){c.target=this;c.method=d;if(c.apply(b||this||window,arguments)===false){return}return d.apply(this||window,arguments)}}});jQuery.extendIf(String,{escape:function(b){return b.replace(/('|\\)/g,"\\$1")},leftPad:function(e,c,d){var b=new String(e);if(!d){d=" "}while(b.length<c){b=d+b}return b.toString()},format:function(c){var b=Array.prototype.slice.call(arguments,1);return c.replace(/\{(\d+)\}/g,function(d,e){return b[e]})}})}String.prototype.isInteger=function(){return !isNaN(parseInt(this))};String.prototype.isFloat=function(){return !isNaN(parseFloat(this))};String.prototype.toggle=function(c,b){return this==c?b:c};String.prototype.trim=function(){var b=/^\s+|\s+$/g;return function(){return this.replace(b,"")}}();String.prototype.translate=function(e,d){if(!(e.length&&d.length)||e.length!=d.length){return this}var c=this;for(var b=0;b<e.length;b++){if(typeof(e)=="string"){c=c.replace(new RegExp(e.charAt(b),"g"),d.charAt(b))}else{c=c.replace(new RegExp(e[b],"g"),d[b])}}return c};String.prototype.isDigit=function(){return/^\d+$/.test(this)};String.prototype.removeWords=function(f){var e=this.split(" ");var d=new Array();for(var c=0;c<e.length;c++){d.push(e[c]);for(var b=0;b<f.length;b++){if(d[c]==f[b]){d.pop();break}}}return d.join(" ")};jQuery.extendIf(Number.prototype,{constrain:function(c,b){return Math.min(Math.max(this,c),b)},isInteger:function(){return !isNaN(parseInt(this))},isFloat:function(){return !isNaN(parseFloat(this))}});jQuery.extendIf(Array.prototype,{indexOf:function(d){for(var c=0,b=this.length;c<b;c++){if(this[c]==d){return c}}return -1},removeObject:function(c){var b=this.indexOf(c);if(b!=-1){this.splice(b,1)}return this},binarySearch:function binarySearch(g,c){var b=0,f=this.length-1,d,e;while(b<=f){d=parseInt((b+f)/2,10);e=c(this[d],g);if(e<0){b=d+1;continue}if(e>0){f=d-1;continue}return d}return -1},inject:function(d,c){for(var b=0;b<this.length;b++){d=c(d,this[b],b)}return d},map:function(e,d){var b=new Array(this.length);for(var c=0,f=this.length;c<f;c++){if(c in this){b[c]=e.call(d,this[c],c,this)}}return b},intersect:function(){if(!arguments.length){return[]}var e=this;var d=a2=null;var h=0;while(h<arguments.length){d=[];a2=arguments[h];var c=e.length;var b=a2.length;for(var g=0;g<c;g++){for(var f=0;f<b;f++){if(e[g]===a2[f]){d.push(e[g])}}}e=d;h++}return d.unique()},unique:function(){var c=[];var b=this.length;for(var e=0;e<b;e++){for(var d=e+1;d<b;d++){if(this[e]===this[d]){d=++e}}c.push(this[e])}return c}});Date.prototype.getElapsed=function(b){return Math.abs((b||new Date()).getTime()-this.getTime())};if(typeof(usig)=="undefined"){usig={}}usig.debug=function(b){if(window.console&&window.console.log){window.console.log(b)}};if(typeof(usig)=="undefined"){usig={}}if(typeof(usig.Calle)=="undefined"){usig.Calle=function(b,c,e,d){this.codigo=b;this.nombre=c;this.alturaValida=function(g){if(e instanceof Array){if(e.length==0){throw (new usig.ErrorCalleSinAlturas(this.nombre));return false}var f=false;for(a in e){f=f||((parseInt(e[a][0])<=parseInt(g))&&(parseInt(e[a][1])>=parseInt(g)))}return f}};this.getTramos=function(){return e};this.toString=function(){return this.nombre};this.seCruzaCon=function(f){if(d){return d.indexOf(f.codigo)>=0}}}}if(typeof(usig)=="undefined"){usig={}}if(typeof(usig.Direccion)=="undefined"){usig.Direccion=function(b,f){var e=null;var j=null;var h=0;var d=null;var g="";var c=null;if(b instanceof usig.Calle){e=b}else{return null}if(f instanceof usig.Calle){j=f;d=usig.Direccion.CALLE_Y_CALLE}else{if(!isNaN(parseInt(f))){d=usig.Direccion.CALLE_ALTURA;h=parseInt(f)}else{return null}}this.getCalle=function(){return e};this.getCalleCruce=function(){if(d==usig.Direccion.CALLE_Y_CALLE){return j}else{return null}};this.getAltura=function(){return h};this.getTipo=function(){return d};this.toString=function(){if(d==usig.Direccion.CALLE_ALTURA){return e.toString()+" "+(h>0?h:"S/N")}else{var k=j.toString();var l=k.match(/^(I|Hi|HI).*/)?" e ":" y ";return e.toString()+l+k}};this.setCoordenadas=function(k){c=usig.Punto.fromPunto(k)};this.setSmp=function(k){g=k};this.getCoordenadas=function(){return c};this.getSmp=function(){return g};this.clone=function(){var k=new usig.Direccion(e,f);return jQuery.extend(true,k,this)}};usig.Direccion.CALLE_ALTURA=0;usig.Direccion.CALLE_Y_CALLE=1;usig.Direccion.fromObj=function(d){var c=new usig.Calle(d.cod_calle,d.calle);var b=null;if(d.cod_calle2!=null){b=new usig.Direccion(c,new usig.Calle(d.cod_calle2,d.calle2))}else{b=new usig.Direccion(c,d.altura)}if(d.smp!=undefined&&d.smp!=null){b.setSmp(d.smp)}if(d.coordenadas!=undefined&&d.coordenadas!=null){b.setCoordenadas(usig.Punto.fromWkt(d.coordenadas))}return b}}if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());if(typeof(usig)=="undefined"){usig={}}if(typeof(usig.data)=="undefined"){usig.data={}}if(typeof(usig.defaults)=="undefined"){usig.defaults={}}usig.defaults.Callejero={server:"http://servicios.usig.buenosaires.gov.ar/callejero",lazyDataLoad:false,loadFullDatabase:true,expirationTime:10080};usig.Callejero=(function(){var b={},o=this,e=false,l={ready:[]},m=false;function f(t,v){var s=true;for(var q=0;q<t.length;q++){var u=t[q];u.lastIndex=0;if(!u.test(v[2])){s=false;break}}return s}function p(r){m=false;if(r.length!=usig.data.Callejero.length){alert("Se produjo un error al cargar la información de cruces de calles.");return}for(var q=0;q<usig.data.Callejero.length;q++){usig.data.Callejero[q].push(r[q])}}function n(q){usig.data.Callejero=q;m=false;d("ready")}function h(){m=true;jQuery.ajax({type:"GET",url:b.server,data:{full:1,cruces:1},dataType:"jsonp",success:p,error:function(){alert("Se produjo un error al intentar cargar la información de calles.")}})}function c(q){m=true;jQuery.ajax({type:"GET",url:b.server,data:b.loadFullDatabase?{full:1}:{},dataType:"jsonp",success:q,error:function(){alert("Se produjo un error al intentar cargar la información de calles.")}})}function g(){if(!m){if(!k()){c(n)}else{var r;try{if(localStorage.callejero){r=JSON.parse(localStorage.callejero)}if(r&&(new Date().getTime()<r.expiration)){n(JSON.parse(r.calles))}else{c(function(u){var s=b.expirationTime*60*1000;var t={calles:JSON.stringify(u),expiration:new Date().getTime()+s};localStorage.callejero=JSON.stringify(t);n(u)})}}catch(q){c(n)}}}}function k(){try{return"localStorage" in window&&window.localStorage!==null}catch(q){return false}}function d(r){for(var q=0;q<l[r].length;q++){l[r][q]()}}function j(s,r){var t=false;for(var q=0;q<l[s].length;q++){t=t||(l[s][q]==r)}if(!t){l[s].push(r)}}return{init:function(q){b=jQuery.extend({},usig.defaults.Callejero,q);if(typeof(b.onReady)=="function"){j("ready",b.onReady)}e=true;if(!usig.data.Callejero&&!b.lazyDataLoad){g.defer(100)}else{if(usig.data.Callejero){d("ready")}}return this},buscarPorCodigo:function(t){var q=[];if(/^[0-9]+$/.test(t)){var s=usig.data.Callejero.binarySearch(t,function(v,u){return v[0]-u});if(s>-1){var r=usig.data.Callejero[s];q.push(new usig.Calle(r[0],r[1],r[3],r[4]));i=s+1;while(i<usig.data.Callejero.length&&usig.data.Callejero[i][0]==t){r=usig.data.Callejero[i];q.push(new usig.Calle(r[0],r[1],r[3],r[4]));i++}i=s-1;while(i>=0&&usig.data.Callejero[i][0]==t){r=usig.data.Callejero[i];q.unshift(new usig.Calle(r[0],r[1],r[3],r[4]));i--}}}return q},matcheaCalle:function(u,q){var s=[];var r=u.replace(/"/g,"").translate("áéíóúüÁÉÍÓÚÜàèìòùÀÈÌÒÙ","aeiouuAEIOUUaeiouAEIOU").toUpperCase().trim();var t=r.split(" ");wordsRE=t.map(function(x){return new RegExp("^"+x+"| "+x,"gi")});if(this.listo()){for(var v=0;v<usig.data.Callejero.length;v++){if(f(wordsRE,usig.data.Callejero[v])){s.push(new usig.Calle(usig.data.Callejero[v][0],usig.data.Callejero[v][1],usig.data.Callejero[v][3],usig.data.Callejero[v][4]));if(!isNaN(parseInt(q))&&s.length>=parseInt(q)){break}}}if(usig.data.Callejero[0].length<5&&!m){h()}}else{g();throw (new usig.ErrorEnCargaDelCallejero())}return s},tieneTramosComoAv:function(r){var q=usig.data.Callejero.binarySearch(r.codigo,function(t,s){return t[0]-s});return r.codigo!=0&&(usig.data.Callejero[q-1][0]==r.codigo||usig.data.Callejero[q+1][0]==r.codigo)},getNombreCalle:function(s,t){var q=this.buscarPorCodigo(s);for(var r=0;r<q.length;r++){if(q[r].alturaValida(t)){return q[r].nombre}}return""},listo:function(){return usig.data.Callejero&&usig.data.Callejero instanceof Array},inicializado:function(){return e}}})();if(typeof(usig)=="undefined"){usig={}}usig.StringDireccion=function(d,c){this.tipo=usig.StringDireccion.INVALIDO;this.strCalles="";this.strAltura="";this.strInput=d.replace(/"/g,"").replace(/[\.,\(\)']/g," ").toUpperCase().trim();var h=/[sS][/\\][nN]/;function e(k,j){return k.isDigit()||(j&&h.test(k))}this.setearCalleAltura=function(){b=this.strInput.split(" ");this.maxWordLen=b.inject(0,function(m,k,l){return Math.max(k.trim().length,m)});var j=b.length;if(j>1&&e(b[j-1],c)){this.tipo=usig.StringDireccion.CALLE_ALTURA;this.strCalles=b.inject("",function(m,k,l){return l<(j-1)?(m!=""?m+" "+k:k):m});this.strAltura=b[j-1]}else{this.tipo=usig.StringDireccion.CALLE;this.strCalles=this.strInput}};if(this.strInput.length>0){var b=this.strInput.split(" Y ");if(b.length>=2){var g=f(this.strInput);b=g.split(" Y ");if(b.length>=2){this.tipo=usig.StringDireccion.CALLE_Y_CALLE;this.strCalles=[b[0].replace(" & "," Y "),b[1].replace(" & "," Y ")]}}b=this.strInput.split(" E ");if(b.length>=2){if(parseInt(b[b.length-1])!=b[b.length-1]){this.tipo=usig.StringDireccion.CALLE_Y_CALLE;this.strCalles=b}}if(this.tipo==usig.StringDireccion.INVALIDO){this.setearCalleAltura()}}else{this.tipo=usig.StringDireccion.INVALIDO}function f(j){return j.translate(["GELLY Y OBES","MENENDEZ Y PELAYO","OLAGUER Y FELIU","ORTEGA Y GASSET","PAULA Y RODRIGUEZ","PAZ Y FIGUEROA","PI Y MARGALL","RAMON Y CAJAL","TORRES Y TENORIO","TREINTA Y TRES"],["GELLY & OBES","MENENDEZ & PELAYO","OLAGUER & FELIU","ORTEGA & GASSET","PAULA & RODRIGUEZ","PAZ & FIGUEROA","PI & MARGALL","RAMON & CAJAL","TORRES & TENORIO","TREINTA & TRES"])}this.quitarAvsCalle=function(){var j=["AV","AVDA","AVENIDA"];if(this.tipo==usig.StringDireccion.CALLE_ALTURA){this.strCalles=this.strCalles.removeWords(j)}else{if(this.tipo==usig.StringDireccion.CALLE_Y_CALLE){this.strCalles[0]=this.strCalles[0].removeWords(j)}}};this.quitarAvsCalleCruce=function(){var j=["AV","AVDA","AVENIDA"];if(this.tipo==usig.StringDireccion.CALLE_Y_CALLE){this.strCalles[1]=this.strCalles[1].removeWords(j)}};this.quitarPasajes=function(){var j=["PJE","PSJE","PASAJE"];if(this.tipo==usig.StringDireccion.CALLE_ALTURA){this.strCalles=this.strCalles.removeWords(j)}else{if(this.tipo==usig.StringDireccion.CALLE_Y_CALLE){this.strCalles[0]=this.strCalles[0].removeWords(j);this.strCalles[1]=this.strCalles[1].removeWords(j)}}};this.esAlturaSN=function(j){return h.test(j)}};usig.StringDireccion.CALLE=0;usig.StringDireccion.CALLE_ALTURA=1;usig.StringDireccion.CALLE_Y_CALLE=2;usig.StringDireccion.INVALIDO=-1;if(typeof(usig)=="undefined"){usig={}}usig.ErrorCalleInexistente=function(b){this.toString=function(){return"Calle inexistente: "+b};this.getNombreCalle=function(){return b};this.getErrorMessage=function(){return usig.ErrorCalleInexistente.defaults.texts.message}};usig.ErrorCalleInexistente.defaults={texts:{message:"No pudo hallarse ninguna calle existente que coincidiera con su b&uacute;squeda. Por favor, revise el nombre ingresado y vuelva a intentarlo."}};if(typeof(usig)=="undefined"){usig={}}usig.ErrorCalleInexistenteAEsaAltura=function(c,b,d){this.getCalle=function(){return c};this.getMatchings=function(){return b};this.getAltura=function(){return d};this.toString=function(){return"La calle "+c+" no existe a la altura "+d};this.getErrorMessage=function(){var e=usig.ErrorCalleInexistenteAEsaAltura.defaults.texts.message+"<ul>";jQuery.each(b,function(g,h){var f=h.getTramos();jQuery.each(f,function(j,k){e+="<li>"+h.nombre+" "+k[0]+"-"+k[1]+"</li>"})});e+="</ul>";return e}};usig.ErrorCalleInexistenteAEsaAltura.defaults={texts:{message:"La altura indicada no es v&aacute;lida para la calle ingresada. A continuaci&oacute;n se muestran algunas opciones v&aacute;lidas halladas:"}};if(typeof(usig)=="undefined"){usig={}}usig.ErrorCruceInexistente=function(c,e,b,d){this.getCalle1=function(){return c};this.getCalle2=function(){return b};this.getMatchingsCalle1=function(){return e};this.getMatchingsCalle2=function(){return d};this.toString=function(){return"Cruce inexistente: "+c+" y "+b};this.getErrorMessage=function(){var f=usig.ErrorCruceInexistente.defaults.texts.message;f+="<br/>"+usig.ErrorCruceInexistente.defaults.texts.detalleCalle1+"<ul>";jQuery.each(e,function(g,h){f+="<li>"+h.nombre+"</li>"});f+="</ul>";f+=usig.ErrorCruceInexistente.defaults.texts.detalleCalle2+"<ul>";jQuery.each(d,function(g,h){f+="<li>"+h.nombre+"</li>"});f+="</ul>";return f}};usig.ErrorCruceInexistente.defaults={texts:{message:"El cruce de calles indicado no existe. A continuaci&oacute;n se muestran algunas calles que coinciden con su b&uacute;squeda.",detalleCalle1:"Algunas calles halladas que coinciden con la 1ra calle ingresada son:",detalleCalle2:"Algunas calles halladas que coinciden con la 2da calle ingresada son:"}};if(typeof(usig)=="undefined"){usig={}}usig.ErrorCalleSinAlturas=function(b){this.toString=function(){return usig.ErrorCalleSinAlturas.defaults.texts.message.replace("{calle}",b)};this.getNombreCalle=function(){return b};this.getErrorMessage=function(){return usig.ErrorCalleSinAlturas.defaults.texts.message.replace("{calle}",b)}};usig.ErrorCalleSinAlturas.defaults={texts:{message:"La calle {calle} no posee alturas oficiales. Utilice intersecciones para hallar direcciones v&aacute;lidas sobre esta calle o escriba S/N en lugar de la altura."}};if(typeof(usig)=="undefined"){usig={}}usig.ErrorEnCargaDelCallejero=function(){this.toString=function(){return"Callejero no disponible."};this.getErrorMessage=function(){return"El callejero no se encuentra cargado aún o se produjo un error al intentar cargarlo"}};if(typeof(usig)=="undefined"){usig={}}if(typeof(usig.defaults)=="undefined"){usig.defaults={}}usig.defaults.NormalizadorDirecciones={lazyDataLoad:false,loadFullDatabase:true,aceptarCallesSinAlturas:false};usig.NormalizadorDirecciones=(function(){var b={},g=false,l={ready:[]},k=null;function m(r,s,q){var c=k.matcheaCalle(r.strCalles);try{var p=h(r,c,s)}catch(o){throw (o)}if(p.length==0&&c.length>0){r.quitarAvsCalle();c=k.matcheaCalle(r.strCalles);try{p=h(r,c,s)}catch(o){throw (o)}p=e(p);if(p.length==0){throw (new usig.ErrorCalleInexistenteAEsaAltura(r.strCalles,c,r.strAltura))}}else{if(p.length==0&&c.length==0){r.quitarPasajes();c=k.matcheaCalle(r.strCalles);try{p=h(r,c,s)}catch(o){throw (o)}}}if(q&&p.length>1){jQuery.each(p,function(u,t){if(d(r.strCalles,t.getCalle().nombre)){p=[t]}})}return p}function d(p,o){function c(q){q=q.replace(/"/g,"").translate("áéíóúüÁÉÍÓÚÜàèìòùÀÈÌÒÙ","aeiouuAEIOUUaeiouAEIOU").toUpperCase().trim();q=q.split(" ");return q}p=c(p);o=c(o);if(p.length==o.length){intersect=p.intersect(o);if(p.length==intersect.length){return true}}return false}function h(s,o,t){var c=new Array();var r=0;if(o.length!=0){for(var q=0;q<o.length;q++){try{if(o[q].alturaValida(s.strAltura)){c.push(new usig.Direccion(o[q],s.strAltura))}}catch(p){if(p instanceof usig.ErrorCalleSinAlturas&&b.aceptarCallesSinAlturas&&s.esAlturaSN(s.strAltura)){c.push(new usig.Direccion(o[q],0))}r++}if(!isNaN(parseInt(t))&&c.length>=parseInt(t)){break}}if(o.length==r&&c.length==0){throw (new usig.ErrorCalleSinAlturas(o[0].toString()))}}return c}function e(q,r){var p=r?r:"getCalle";var o=new Array();for(var c=0;c<q.length;c++){if(k.tieneTramosComoAv(q[c][p]())){o.push(q[c])}}return o}function n(B,A){var D=k.matcheaCalle(B.strCalles[0]);var C=k.matcheaCalle(B.strCalles[1]);var x=new Array();function y(F,E){return Math.min(F.codigo,E.codigo)+Math.max(F.codigo,E.codigo)}var c=new Array();for(var u=0;u<D.length;u++){for(var r=0;r<C.length;r++){if(D[u].codigo!=C[r].codigo&&x.indexOf(y(D[u],C[r]))<0&&D[u].seCruzaCon(C[r])&&C[r].seCruzaCon(D[u])){c.push(new usig.Direccion(D[u],C[r]));x.push(y(D[u],C[r]));if(!isNaN(parseInt(A))&&c.length>=parseInt(A)){break}}}if(!isNaN(parseInt(A))&&c.length>=parseInt(A)){break}}if(c.length==0&&D.length>0&&C.length>0){var w=B.strCalles[0].split(" ");var t=B.strCalles[1].split(" ");if(w.indexOf("AV")>=0||w.indexOf("AVDA")>=0||w.indexOf("AVENIDA")>=0){var v=jQuery.extend(true,{},B);v.quitarAvsCalle();try{var q=n(v,A)}catch(z){throw (new usig.ErrorCruceInexistente(B.strCalles[0],D,B.strCalles[1],C))}e(q);if(q instanceof Array){return q}}if(t.indexOf("AV")>=0||t.indexOf("AVDA")>=0||t.indexOf("AVENIDA")>=0){var s=jQuery.extend(true,{},B);s.quitarAvsCalleCruce();try{var p=n(s,A)}catch(z){throw (new usig.ErrorCruceInexistente(B.strCalles[0],D,B.strCalles[1],C))}e(p,"getCalleCruce");if(p instanceof Array){return p}}}if(c.length<A){var o=k.matcheaCalle(B.strInput);var u=0;while(c.length<A&&u<o.length){c.push(o[u]);u++}}if(c.length==0&&D.length>0&&C.length>0){throw (new usig.ErrorCruceInexistente(B.strCalles[0],D,B.strCalles[1],C))}return c}function f(o){for(var c=0;c<l[o].length;c++){l[o][c]()}}function j(p,o){var q=false;for(var c=0;c<l[p].length;c++){q=q||(l[p][c]==o)}if(!q){l[p].push(o)}}return{normalizar:function(q,r,o){if(typeof(o)=="undefined"){o=true}if(typeof($)=="undefined"){throw ("Error: Este componente requiere $ y no se encontro.");return[]}var p=new usig.StringDireccion(q,b.aceptarCallesSinAlturas);var c=[];switch(p.tipo){case usig.StringDireccion.CALLE:c=k.matcheaCalle(p.strCalles,r);break;case usig.StringDireccion.CALLE_ALTURA:c=m(p,r,o);break;case usig.StringDireccion.CALLE_Y_CALLE:c=n(p,r);if(c.length==0){p.setearCalleAltura();c=m(p,r,o)}break;case usig.StringDireccion.INVALIDO:c=[];break}if(c instanceof Array){if(c.length>0){return c}else{throw (new usig.ErrorCalleInexistente(q))}}else{return c}},listo:function(){return k?k.listo():false},setOptions:function(c){b=jQuery.extend({},b,c);if(typeof(b.onReady)=="function"){j("ready",b.onReady)}},init:function(c){b=jQuery.extend({},usig.defaults.NormalizadorDirecciones,c);if(typeof(b.onReady)=="function"){j("ready",b.onReady)}k=usig.Callejero.init({lazyDataLoad:b.lazyDataLoad,loadFullDatabase:b.loadFullDatabase,onReady:f.createDelegate(this,["ready"])});g=true;return this},inicializado:function(){return g}}})();